<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS 布局实验室</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&family=Noto+Sans+SC:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- 引入 Prism.js 代码高亮 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css" rel="stylesheet">
    <style>
        :root {
            --gold: #FFD700;
            --light-blue: #F0F8FF;
            --deep-blue: #0080FF;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --border-radius: 8px;
            --box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Roboto', 'Noto Sans SC', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: var(--light-blue);
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--deep-blue), #0066CC);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--box-shadow);
            position: relative;
        }
        
        header h1 {
            font-weight: 500;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        
        header p {
            opacity: 0.9;
            font-weight: 300;
        }
        
        .gold-accent {
            position: absolute;
            width: 100px;
            height: 3px;
            background-color: var(--gold);
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .main-container {
            display: flex;
            flex-direction: column;
            flex: 1;
            max-width: 1200px;
            margin: 1rem auto;
            width: calc(100% - 2rem);
            gap: 1rem;
        }
        
        .content-row {
            display: flex;
            gap: 1rem;
            flex: 1;
        }
        
        .editor-panel, .preview-panel, .tips-panel {
            display: flex;
            flex-direction: column;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }
        
        .editor-panel, .preview-panel {
            flex: 2;
        }
        
        .tips-panel {
            flex: 1;
        }
        
        .panel-header {
            padding: 1rem;
            background-color: var(--deep-blue);
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .panel-header svg {
            width: 20px;
            height: 20px;
        }
        
        /* 代码编辑器容器 */
        .code-container {
            position: relative;
            flex: 1;
            overflow: hidden;
            display: flex;
        }
        
        /* 行号容器 - 隐藏 */
        .line-numbers-container {
            display: none;
        }
        
        /* 编辑器主体容器 */
        .editor-main {
            flex: 1;
            position: relative;
            overflow: hidden;
        }
        
        /* 文本输入框 */
        .code-editor {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #272822;
            color: #f8f8f2;
            border: none;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
            line-height: 1.5;
            caret-color: #f8f8f2;
            z-index: 2;
            overflow: auto;
        }
        
        /* 选中文本高亮 */
        .code-editor::selection {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .code-editor::-moz-selection {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        /* 高亮显示的代码 - 隐藏 */
        .highlighted-code {
            display: none;
        }
        
        /* 同步滚动容器 */
        .sync-scroll-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .preview-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--light-blue);
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            position: relative;
            padding: 1rem;
        }
        
        .layout-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .layout-example {
            border: 1px dashed #ccc;
            padding: 1rem;
            background-color: white;
        }
        
        .layout-title {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--deep-blue);
        }
        
        /* 布局演示元素样式 */
        .outer {
            border: 1px solid #ddd;
            margin-bottom: 10px;
        }
        
        .left {
            background-color: #FF6B6B;
            color: white;
            padding: 10px;
        }
        
        .right {
            background-color: #4ECDC4;
            color: white;
            padding: 10px;
        }
        
        .center {
            background-color: #45B7D1;
            color: white;
            padding: 10px;
        }
        
        .parent {
            background-color: #FFD166;
            padding: 10px;
            position: relative;
            height: 100px;
        }
        
        .child {
            background-color: #06D6A0;
            color: white;
            padding: 10px;
        }
        
        .wrapper {
            background-color: #118AB2;
            color: white;
            padding: 10px;
        }
        
        .controls {
            display: flex;
            gap: 0.75rem;
            padding: 1rem;
            background-color: #f0f0f0;
            border-top: 1px solid #ddd;
        }
        
        button {
            padding: 0.6rem 1.2rem;
            background-color: var(--deep-blue);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        button:hover {
            background-color: #0066CC;
            transform: translateY(-2px);
        }
        
        button#reset-btn {
            background-color: #6c757d;
        }
        
        button#reset-btn:hover {
            background-color: #5a6268;
        }
        
        select {
            padding: 0.6rem;
            border-radius: var(--border-radius);
            border: 1px solid #ddd;
            background-color: white;
            color: #333;
            font-size: 0.9rem;
            flex: 1;
            cursor: pointer;
            transition: var(--transition);
        }
        
        select:hover {
            border-color: var(--deep-blue);
        }
        
        select:focus {
            outline: none;
            border-color: var(--deep-blue);
            box-shadow: 0 0 0 2px rgba(0, 128, 255, 0.2);
        }
        
        .html-structure {
            padding: 1rem;
            background-color: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            color: #495057;
            border-top: 1px solid #e9ecef;
        }
        
        .tips-content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: white;
        }
        
        .tip-item {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .tip-item h3 {
            color: var(--deep-blue);
            margin-bottom: 0.5rem;
        }
        
        .tip-item p {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        footer {
            text-align: center;
            padding: 1rem;
            background-color: var(--dark-color);
            color: white;
            font-size: 0.9rem;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .main-container {
                margin: 0.5rem;
                width: calc(100% - 1rem);
            }
            
            .content-row {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 1.5rem;
            }
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .shape-container {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body>
    <header>
        <h1>CSS 布局实验室</h1>
        <p>可视化 CSS 布局生成与预览工具</p>
        <div class="gold-accent"></div>
    </header>
    
    <div class="main-container">
        <div class="content-row">
            <div class="editor-panel">
                <div class="panel-header">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                    </svg>
                    CSS 代码编辑器
                </div>
                <div class="code-container">
                    <div class="line-numbers-container" id="line-numbers"></div>
                    <div class="editor-main">
                        <textarea id="css-code" class="code-editor" spellcheck="false"></textarea>
                        <pre id="highlighted-code" class="highlighted-code"><code class="language-css"></code></pre>
                    </div>
                </div>
                <div class="controls">
                    <select id="presets">
                        <option value="">选择预设布局...</option>
                        <optgroup label="两栏布局">
                            <option value="two-col-float">浮动布局</option>
                            <option value="two-col-float-bfc">浮动+BFC</option>
                            <option value="two-col-flex">Flex布局</option>
                            <option value="two-col-absolute">绝对定位1</option>
                            <option value="two-col-absolute2">绝对定位2</option>
                        </optgroup>
                        <optgroup label="三栏布局">
                            <option value="three-col-absolute">绝对定位</option>
                            <option value="three-col-flex">Flex布局</option>
                            <option value="three-col-float">浮动布局</option>
                            <option value="three-col-holy-grail">圣杯布局</option>
                            <option value="three-col-double-fly">双飞翼布局</option>
                        </optgroup>
                        <optgroup label="居中布局">
                            <option value="center-transform">transform居中</option>
                            <option value="center-margin-auto">margin:auto居中</option>
                            <option value="center-negative-margin">负margin居中</option>
                            <option value="center-flex">Flex居中</option>
                            <option value="center-grid">Grid居中</option>
                        </optgroup>
                        <optgroup label="其他布局">
                            <option value="grid-layout">Grid网格布局</option>
                            <option value="multi-column">多列布局</option>
                            <option value="sticky-footer">粘性页脚</option>
                            <option value="responsive-card">响应式卡片</option>
                        </optgroup>
                    </select>
                    <button id="run-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        运行
                    </button>
                    <button id="reset-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                        重置
                    </button>
                </div>
            </div>
            
            <div class="preview-panel">
                <div class="panel-header">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    </svg>
                    实时预览
                </div>
                <div class="preview-area">
                    <div class="layout-container" id="layout-container">
                        <div class="layout-example">
                            <div class="layout-title">布局演示区域</div>
                            <div id="layout-preview"></div>
                        </div>
                    </div>
                </div>
                <div class="panel-header">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    HTML 结构
                </div>
                <div class="html-structure" id="html-structure">&lt;div class="outer"&gt;&lt;div class="left"&gt;左侧&lt;/div&gt;&lt;div class="right"&gt;右侧&lt;/div&gt;&lt;/div&gt;</div>
            </div>
        </div>
        
        <div class="content-row">
            <div class="tips-panel">
                <div class="panel-header">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    设计思路提示
                </div>
                <div class="tips-content" id="tips-content">
                    <div class="tip-item">
                        <h3>选择布局查看设计思路</h3>
                        <p>从下拉菜单中选择一个布局方案，这里将显示该布局的实现原理和技巧。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>CSS 布局实验室 &copy; 2023 | 学习各种CSS布局技术</p>
    </footer>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-css.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const cssCode = document.getElementById('css-code');
            const runBtn = document.getElementById('run-btn');
            const resetBtn = document.getElementById('reset-btn');
            const presets = document.getElementById('presets');
            const layoutPreview = document.getElementById('layout-preview');
            const tipsContent = document.getElementById('tips-content');
            const highlightedCode = document.querySelector('#highlighted-code code');
            const lineNumbers = document.getElementById('line-numbers');
            const htmlStructure = document.getElementById('html-structure');
            
            // 创建一个style元素来持久化样式
            const styleElement = document.createElement('style');
            document.head.appendChild(styleElement);
            
            // 布局设计思路提示
            const layoutTips = {
                'two-col-float': {
                    title: "两栏布局 - 浮动",
                    content: "经典浮动布局：左侧浮动，右侧通过margin-left避开浮动元素。注意清除浮动防止父元素高度塌陷。"
                },
                'two-col-float-bfc': {
                    title: "两栏布局 - 浮动+BFC",
                    content: "利用BFC特性：右侧设置overflow:hidden触发BFC，使其不与浮动元素重叠。BFC区域是独立的渲染区域。"
                },
                'two-col-flex': {
                    title: "两栏布局 - Flex",
                    content: "现代Flex布局：容器设为display:flex，左侧固定宽度，右侧flex:1自动填充剩余空间。简单且强大。"
                },
                'two-col-absolute': {
                    title: "两栏布局 - 绝对定位1",
                    content: "绝对定位方案1：左侧绝对定位，右侧通过margin-left留出空间。注意父元素需要相对定位。"
                },
                'two-col-absolute2': {
                    title: "两栏布局 - 绝对定位2",
                    content: "绝对定位方案2：右侧绝对定位并设置left值，左侧自然流动。适合右侧宽度固定的场景。"
                },
                'three-col-absolute': {
                    title: "三栏布局 - 绝对定位",
                    content: "左右绝对定位，中间通过margin留出空间。简单直接但缺乏灵活性，内容高度不一致时会有问题。"
                },
                'three-col-flex': {
                    title: "三栏布局 - Flex",
                    content: "现代解决方案：Flex容器，左右固定宽度，中间flex:1自适应。布局简单，控制方便。"
                },
                'three-col-float': {
                    title: "三栏布局 - 浮动",
                    content: "传统浮动方案：左右浮动，中间最后渲染并通过margin避开两侧。注意HTML顺序和清除浮动。"
                },
                'three-col-holy-grail': {
                    title: "三栏布局 - 圣杯布局",
                    content: "经典圣杯布局：通过浮动、负边距和相对定位实现，中间列优先渲染，三栏等高。"
                },
                'three-col-double-fly': {
                    title: "三栏布局 - 双飞翼布局",
                    content: "圣杯布局变体：通过额外包裹层实现，避免圣杯布局的相对定位，结构更简单。"
                },
                'center-transform': {
                    title: "居中 - transform",
                    content: "现代居中方案：top/left 50% + transform平移。不依赖具体尺寸，适合未知大小的元素。"
                },
                'center-margin-auto': {
                    title: "居中 - margin:auto",
                    content: "绝对定位+margin:auto：四个方向定位为0，margin自动分配。需要元素有明确尺寸。"
                },
                'center-negative-margin': {
                    title: "居中 - 负margin",
                    content: "传统居中方案：top/left 50% + 负margin。需要知道元素确切尺寸，兼容性好。"
                },
                'center-flex': {
                    title: "居中 - Flex",
                    content: "Flex容器方案：justify-content和align-items都设为center。最简单现代的居中方式。"
                },
                'center-grid': {
                    title: "居中 - Grid",
                    content: "Grid布局方案：place-items: center一键居中。Grid布局的强大特性之一。"
                },
                'grid-layout': {
                    title: "Grid网格布局",
                    content: "CSS Grid强大布局：定义行列创建网格，可实现复杂响应式布局。现代布局的首选方案。"
                },
                'multi-column': {
                    title: "多列布局",
                    content: "column-count/width创建多列文本流。类似报纸排版，适合长文本内容展示。"
                },
                'sticky-footer': {
                    title: "粘性页脚",
                    content: "页脚始终在底部：Flex或Grid布局，内容区flex:1自动扩展。无需计算高度。"
                },
                'responsive-card': {
                    title: "响应式卡片",
                    content: "响应式卡片组：Flex+媒体查询，根据屏幕尺寸调整布局。现代网页常用模式。"
                }
            };
            
            // 预设代码和HTML结构
            const presetCodes = {
                'two-col-float': {
                    css: `.outer {
    height: 100px;
    overflow: hidden; /* 清除浮动 */
}
.left {
    float: left;
    width: 200px;
    height: 100%;
    background: tomato;
}
.right {
    margin-left: 200px;
    height: 100%;
    background: gold;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'two-col-float-bfc': {
                    css: `.outer {
    height: 100px;
}
.left {
    float: left;
    width: 200px;
    height: 100%;
    background: tomato;
}
.right {
    overflow: hidden; /* 触发BFC */
    height: 100%;
    background: gold;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'two-col-flex': {
                    css: `.outer {
    display: flex;
    height: 100px;
}
.left {
    width: 200px;
    background: tomato;
}
.right {
    flex: 1;
    background: gold;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'two-col-absolute': {
                    css: `.outer {
    position: relative;
    height: 100px;
}
.left {
    position: absolute;
    width: 200px;
    height: 100%;
    background: tomato;
}
.right {
    margin-left: 200px;
    height: 100%;
    background: gold;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'two-col-absolute2': {
                    css: `.outer {
    position: relative;
    height: 100px;
}
.left {
    width: 200px;
    height: 100%;
    background: tomato;
}
.right {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 200px;
    background: gold;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'three-col-absolute': {
                    css: `.outer {
    position: relative;
    height: 100px;
}
.left {
    position: absolute;
    width: 100px;
    height: 100%;
    background: tomato;
}
.right {
    position: absolute;
    top: 0;
    right: 0;
    width: 200px;
    height: 100%;
    background: gold;
}
.center {
    margin-left: 100px;
    margin-right: 200px;
    height: 100%;
    background: lightgreen;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="center"&gt;中间&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'three-col-flex': {
                    css: `.outer {
    display: flex;
    height: 100px;
}
.left {
    width: 100px;
    background: tomato;
}
.right {
    width: 200px;
    background: gold;
}
.center {
    flex: 1;
    background: lightgreen;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="center"&gt;中间&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'three-col-float': {
                    css: `.outer {
    height: 100px;
    overflow: hidden;
}
.left {
    float: left;
    width: 100px;
    height: 100%;
    background: tomato;
}
.right {
    float: right;
    width: 200px;
    height: 100%;
    background: gold;
}
.center {
    margin-left: 100px;
    margin-right: 200px;
    height: 100%;
    background: lightgreen;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
    &lt;div class="center"&gt;中间&lt;/div&gt;
&lt;/div&gt;`
                },
                'three-col-holy-grail': {
                    css: `.outer {
    height: 100px;
    padding-left: 100px;
    padding-right: 200px;
    overflow: hidden;
}
.left {
    position: relative;
    left: -100px;
    float: left;
    margin-left: -100%;
    width: 100px;
    height: 100%;
    background: tomato;
}
.right {
    position: relative;
    left: 200px;
    float: left;
    margin-left: -200px;
    width: 200px;
    height: 100%;
    background: gold;
}
.center {
    float: left;
    width: 100%;
    height: 100%;
    background: lightgreen;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="center"&gt;中间&lt;/div&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'three-col-double-fly': {
                    css: `.outer {
    height: 100px;
    overflow: hidden;
}
.left {
    float: left;
    margin-left: -100%;
    width: 100px;
    height: 100%;
    background: tomato;
}
.right {
    float: left;
    margin-left: -200px;
    width: 200px;
    height: 100%;
    background: gold;
}
.wrapper {
    float: left;
    width: 100%;
    height: 100%;
    background: lightgreen;
}
.center {
    margin-left: 100px;
    margin-right: 200px;
    height: 100%;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="wrapper"&gt;
        &lt;div class="center"&gt;中间&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
&lt;/div&gt;`
                },
                'center-transform': {
                    css: `.parent {
    position: relative;
    height: 200px;
    background: #FFD166;
}
.child {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 100px;
    height: 50px;
    background: #06D6A0;
    color: white;
    padding: 10px;
}`,
                    html: `&lt;div class="parent"&gt;
    &lt;div class="child"&gt;居中内容&lt;/div&gt;
&lt;/div&gt;`
                },
                'center-margin-auto': {
                    css: `.parent {
    position: relative;
    height: 200px;
    background: #FFD166;
}
.child {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    width: 100px;
    height: 50px;
    background: #06D6A0;
    color: white;
    padding: 10px;
}`,
                    html: `&lt;div class="parent"&gt;
    &lt;div class="child"&gt;居中内容&lt;/div&gt;
&lt;/div&gt;`
                },
                'center-negative-margin': {
                    css: `.parent {
    position: relative;
    height: 200px;
    background: #FFD166;
}
.child {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -25px; /* 高度的一半 */
    margin-left: -50px; /* 宽度的一半 */
    width: 100px;
    height: 50px;
    background: #06D6A0;
    color: white;
    padding: 10px;
}`,
                    html: `&lt;div class="parent"&gt;
    &lt;div class="child"&gt;居中内容&lt;/div&gt;
&lt;/div&gt;`
                },
                'center-flex': {
                    css: `.parent {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 200px;
    background: #FFD166;
}
.child {
    width: 100px;
    height: 50px;
    background: #06D6A0;
    color: white;
    padding: 10px;
}`,
                    html: `&lt;div class="parent"&gt;
    &lt;div class="child"&gt;居中内容&lt;/div&gt;
&lt;/div&gt;`
                },
                'center-grid': {
                    css: `.parent {
    display: grid;
    place-items: center;
    height: 200px;
    background: #FFD166;
}
.child {
    width: 100px;
    height: 50px;
    background: #06D6A0;
    color: white;
    padding: 10px;
}`,
                    html: `&lt;div class="parent"&gt;
    &lt;div class="child"&gt;居中内容&lt;/div&gt;
&lt;/div&gt;`
                },
                'grid-layout': {
                    css: `.outer {
    display: grid;
    grid-template-columns: 200px 1fr 200px;
    grid-template-rows: 100px 1fr 100px;
    height: 300px;
    gap: 10px;
}
.header {
    grid-column: 1 / 4;
    background: #FF6B6B;
}
.left {
    background: #4ECDC4;
}
.center {
    background: #45B7D1;
}
.right {
    background: #118AB2;
}
.footer {
    grid-column: 1 / 4;
    background: #06D6A0;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;div class="header"&gt;头部&lt;/div&gt;
    &lt;div class="left"&gt;左侧&lt;/div&gt;
    &lt;div class="center"&gt;中间&lt;/div&gt;
    &lt;div class="right"&gt;右侧&lt;/div&gt;
    &lt;div class="footer"&gt;页脚&lt;/div&gt;
&lt;/div&gt;`
                },
                'multi-column': {
                    css: `.outer {
    column-count: 3;
    column-gap: 20px;
    column-rule: 1px solid #ddd;
    height: 200px;
    padding: 10px;
    background: white;
}`,
                    html: `&lt;div class="outer"&gt;
    &lt;p&gt;这里是多列文本内容...&lt;/p&gt;
    &lt;p&gt;这里是多列文本内容...&lt;/p&gt;
    &lt;p&gt;这里是多列文本内容...&lt;/p&gt;
&lt;/div&gt;`
                },
                'sticky-footer': {
                    css: `body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}
.content {
    flex: 1;
    padding: 20px;
    background: #f0f0f0;
}
.footer {
    padding: 20px;
    background: #333;
    color: white;
}`,
                    html: `&lt;body&gt;
    &lt;div class="content"&gt;内容区域&lt;/div&gt;
    &lt;div class="footer"&gt;页脚&lt;/div&gt;
&lt;/body&gt;`
                },
                'responsive-card': {
                    css: `.card-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    padding: 20px;
}
.card {
    flex: 1 1 300px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
}
@media (max-width: 768px) {
    .card {
        flex: 1 1 100%;
    }
}`,
                    html: `&lt;div class="card-container"&gt;
    &lt;div class="card"&gt;卡片1&lt;/div&gt;
    &lt;div class="card"&gt;卡片2&lt;/div&gt;
    &lt;div class="card"&gt;卡片3&lt;/div&gt;
&lt;/div&gt;`
                }
            };
            
            // 更新行号
            function updateLineNumbers(code) {
                const lines = code.split('\n').length;
                let numbers = '';
                for (let i = 1; i <= lines; i++) {
                    numbers += i + '\n';
                }
                lineNumbers.textContent = numbers;
            }
            
            // 高亮代码
            function highlightCode() {
                const code = cssCode.value;
                highlightedCode.textContent = code;
                Prism.highlightElement(highlightedCode);
                updateLineNumbers(code);
            }
            
            // 同步滚动
            function syncScroll() {
                const textarea = cssCode;
                const pre = highlightedCode;
                const lineNumbers = document.getElementById('line-numbers');
                
                // 同步垂直滚动
                pre.scrollTop = textarea.scrollTop;
                lineNumbers.scrollTop = textarea.scrollTop;
                
                // 同步水平滚动
                pre.scrollLeft = textarea.scrollLeft;
            }
            
            // 更新提示内容
            function updateTips(layoutKey) {
                const tip = layoutTips[layoutKey] || {
                    title: "CSS布局设计技巧",
                    content: "选择布局方案查看具体实现原理。CSS布局主要通过浮动、定位、Flex、Grid等技术实现。"
                };
                
                tipsContent.innerHTML = `
                    <div class="tip-item">
                        <h3>${tip.title}</h3>
                        <p>${tip.content}</p>
                    </div>
                `;
            }
            
            // 更新预览
            function updatePreview(layoutKey) {
                const layout = presetCodes[layoutKey];
                if (!layout) return;
                
                // 创建预览HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = layout.html.replace(/&lt;/g, '<').replace(/&gt;/g, '>');
                layoutPreview.innerHTML = '';
                layoutPreview.appendChild(tempDiv.firstChild);
                
                // 更新HTML结构显示
                htmlStructure.textContent = layout.html;
            }
            
            // 选择预设
            presets.addEventListener('change', function() {
                const selected = this.value;
                if (selected && presetCodes[selected]) {
                    cssCode.value = presetCodes[selected].css;
                    highlightCode();
                    applyStyles();
                    updateTips(selected);
                    updatePreview(selected);
                }
            });
            
            // 运行按钮
            runBtn.addEventListener('click', function() {
                highlightCode();
                applyStyles();
            });
            
            // 重置按钮
            resetBtn.addEventListener('click', function() {
                cssCode.value = '';
                styleElement.innerHTML = '';
                highlightCode();
                updateTips('');
                layoutPreview.innerHTML = '<div class="layout-title">请选择布局方案</div>';
                htmlStructure.textContent = '选择布局后将显示HTML结构';
            });
            
            // 应用样式
            function applyStyles() {
                // 更新style元素的内容
                styleElement.innerHTML = cssCode.value;
            }
            
            // 监听代码编辑
            cssCode.addEventListener('input', highlightCode);
            cssCode.addEventListener('scroll', syncScroll);
            cssCode.addEventListener('keydown', function(e) {
                // 处理Tab键
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = this.selectionStart;
                    const end = this.selectionEnd;
                    const value = this.value;
                    
                    if (e.shiftKey) {
                        // Shift+Tab: 删除缩进
                        const beforeCursor = value.substring(0, start);
                        const afterCursor = value.substring(end);
                        const beforeLines = beforeCursor.split('\n');
                        const afterLines = afterCursor.split('\n');
                        
                        if (beforeLines.length > 1) {
                            const lastLine = beforeLines[beforeLines.length - 1];
                            if (lastLine.startsWith('    ')) {
                                beforeLines[beforeLines.length - 1] = lastLine.substring(4);
                                this.value = beforeLines.join('\n') + afterLines.join('\n');
                                this.selectionStart = this.selectionEnd = start - 4;
                            }
                        }
                    } else {
                        // Tab: 插入缩进
                        this.value = value.substring(0, start) + '    ' + value.substring(end);
                        this.selectionStart = this.selectionEnd = start + 4;
                    }
                    highlightCode();
                }
            });
            
            // 初始加载第一个预设
            const initialLayout = 'two-col-float';
            cssCode.value = presetCodes[initialLayout].css;
            highlightCode();
            applyStyles();
            updateTips(initialLayout);
            updatePreview(initialLayout);
        });
    </script>
</body>
</html>